---
title: ip、域名关系
date: 2019-08-23 14:55:20
tags:
---
现象：
1. base.xiaojukeji.com不能通过ip访问（参考第3、6点）
2. base-test.xiaojukeji.com可以通过ip访问，也可以访问子系统，访问子系统时会自动转成域名。（参考第4点）
3. base.xiaojukeji.com不需要绑定host访问，base-pre.xiaojukeji.com需要绑定host

问题抽象：
1. 为什么有的网站可以通过ip访问，有的只能通过域名访问？
2. 为什么几个不同的网站解析后ip是一样的？
3. 微服务是如何实现的？

原理：
1. Ip、域名、url关系：一个ip可以对应一个或多个域名，url里协议后面//到第一个/之间是域名，ip与域名绑定关系需要申请，申请后才可以通过域名访问。没有绑定域名的ip，如果需要通过域名访问，则需要绑定host。
2. 一个ip对应多个域名实现方式：虚拟host、反向代理，我们base平台使用的是虚拟host
3. 如果一个ip对应多个域名，那么通过ip访问就会不知道到底使用哪个服务
4. Nginx哪个选项是配置禁止ip访问的？listen 80 default; return 500;
5. Nginx通过哪个选项配置通过ip访问时，自动转成域名？通过ip访问时，如果不带端口号，默认访问的是80端口，所以nginx可以监听80端口，并通过rewrite更改url
6. Nginx配置多个server就相当于多个虚拟host吗？是的
7.  线上nginx配置没有第3点禁止ip访问的配置项，为啥还不能通过ip访问？麒麟网关做了配置，把80端口代理到8080。
8.  线上nginx配置没有80，只有8080，那在通过域名访问时为什么还能正常？麒麟网关做了配置，把80端口代理到8080。
9.  麒麟网关做了哪些事情？不知道 暂时不去了解


参考：
https://blog.csdn.net/gui951753/article/details/83070180
